"use strict";function _typeof(t){return(_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t})(t)}!function(n){var o={};function r(t){if(o[t])return o[t].exports;var e=o[t]={i:t,l:!1,exports:{}};return n[t].call(e.exports,e,e.exports,r),e.l=!0,e.exports}r.m=n,r.c=o,r.d=function(t,e,n){r.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},r.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==_typeof(e)&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return r.d(e,"a",e),e},r.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},r.p="",r(r.s="./src/ts/parallax-vanilla.ts")}({"./src/less/parallax-vanilla.less":function(t,e,n){},"./src/ts/constants.ts":function(t,e,n){n.r(e),n.d(e,"VIDEO_EXTENSIONS",function(){return o}),n.d(e,"MEDIA_TYPES",function(){return r}),n.d(e,"ELEMENT_DATA_KEYS",function(){return i}),n.d(e,"defaultSettings",function(){return s});var o=["3g2","3gp","asf","avi","flv","h264","m4v","mov","mp4","mpg","mpeg","rm","srt","swf","vow","vob","wmv"],r={IMAGE:"image",VIDEO:"video",NONE:"none"},i={MEDIAPATH:"pv-mediapath",MEDIATYPE:"pv-mediatype",MUTE:"pv-mute",HEIGHT:"pv-height",SPEED:"pv-speed"},s={container:{class:"pv-container",height:"250px"},block:{class:"pv-block",speed:-Math.PI,mediatype:r.IMAGE,mediapath:null,mute:!1}}},"./src/ts/init.ts":function(t,e,n){n.r(e);var u=n("./src/ts/constants.ts"),d=n("./src/ts/initContainer.ts"),f=n("./src/ts/initBlock.ts");e.default=function(t){var e=window.pv;e.containerArr=[],e.settings=p(t,u.defaultSettings);for(var n=document.getElementsByClassName(e.settings.container.class),o=0;o<n.length;o++){var r={};r.el=n[o],r.offset=m(r.el),r.el.style.height=Object(d.setContainerHeight)(r,e.settings),r.height=r.el.clientHeight,r.blocks=[];for(var i=n[o].getElementsByClassName(e.settings.block.class),s=0;s<i.length;s++){var a={};a.el=i[s],a.speed=Object(f.setBlockSpeed)(a,e.settings);var l=Object(f.setBlockMediaProps)(a,e.settings),c=l.mediatype,l=l.mediapath;if(a.mediatype=c,a.mediapath=l,a.mute=Object(f.setBlockMute)(a,e.settings),a.mediatype!==u.MEDIA_TYPES.NONE){if(a.mediatype===u.MEDIA_TYPES.VIDEO&&(r.hasVideoBlock=!0),!Object(f.setBlockVisual)(a))throw console.error("Did not successfully set media for block:",a),new Error("Did not successfully set media");Object(f.setBlockAttributes)(r,a)}r.blocks.push(a)}e.containerArr.push(r)}};var p=function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},o=1<arguments.length?arguments[1]:void 0;return Object.keys(n).forEach(function(e){if(!(n[e]instanceof Object))throw new Error("Expected ".concat(e," to be of instance Object"));Object.keys(n[e]).forEach(function(t){if(n[e][t]instanceof Object)throw new Error("Expected ".concat(e," to be primitive value"));if(!o[e].hasOwnProperty(t))throw new Error("Expected ".concat(t," to match available settings"));o[e][t]=n[e][t]})}),o},m=function(t){return t.getBoundingClientRect().top+(window.pageYOffset||document.documentElement.scrollTop)}},"./src/ts/initBlock.ts":function(t,e,n){n.r(e),n.d(e,"setBlockSpeed",function(){return o}),n.d(e,"setBlockMediaProps",function(){return r}),n.d(e,"setBlockMute",function(){return i}),n.d(e,"setBlockVisual",function(){return l}),n.d(e,"setBlockAttributes",function(){return c});function s(t,e){var n=window.pv;n.unmutedBlock&&n.unmutedBlock.videoEl!==t&&(n.unmutedBlock.videoEl.muted=!0,n.unmutedBlock.audioButton.classList.add("mute")),n.unmutedBlock=e,t.muted=!t.muted,e.muted=t.muted,e.audioButton.classList.toggle("mute")}var a=n("./src/ts/constants.ts"),o=function(t,e){var n=t.el.getAttribute(a.ELEMENT_DATA_KEYS.SPEED);if(!n)return e.block.speed;if("string"==typeof n){var o=Number(n);if(isNaN(o))throw console.error("Invalid type for attribute speed for block: "+t.el),new Error("Invalid type for attribute speed");n=o}return 0==n?e.block.speed:n},r=function(t,e){var n=t.el.getAttribute(a.ELEMENT_DATA_KEYS.MEDIATYPE),o=t.el.getAttribute(a.ELEMENT_DATA_KEYS.MEDIAPATH);if(n===a.MEDIA_TYPES.NONE)return{mediatype:n,mediapath:o};if(n=n||e.block.mediatype,o&&u(n,o)&&(n=a.MEDIA_TYPES.VIDEO),!o&&n!==a.MEDIA_TYPES.NONE)throw console.error("Media path not defined for block: "+t.el),new Error("Media path not defined");return{mediatype:n,mediapath:o}},i=function(t,e){t=t.el.getAttribute(a.ELEMENT_DATA_KEYS.MUTE);return t?"true"==t:e.block.mute},l=function(t){var e,n,o,r,i=t.mediatype;return i===a.MEDIA_TYPES.IMAGE?(r=(o=t).mediapath,o.el.style.backgroundImage="url('"+r+"')","none"!=window.getComputedStyle(o.el).getPropertyValue("background-image")):i===a.MEDIA_TYPES.VIDEO&&(t=(e=t).mediapath,(n=document.createElement("video")).src=t,n.autoplay=!0,n.loop=!0,n.defaultMuted=!0,n.muted=!0,e.muted=!0,e.videoEl=n,e.el.appendChild(n),void 0!==window.orientation||e.mute||(n.addEventListener("click",function(){s(n,e)}),(t=document.createElement("a")).href="#",t.className+="audio-icon mute",t.appendChild(document.createElement("span")),t.addEventListener("click",function(t){t.preventDefault(),s(n,e)}),e.audioButton=t,e.el.insertAdjacentElement("afterend",t)),!0)},c=function(t,e){var n=window.pv;d();var o=0,r=0,i=0,i=t.offset<n.windowProps.windowHeight?(r=(t.height+t.offset)/Math.abs(e.speed),0<e.speed?(o=-Math.abs(t.offset),t.height+t.offset):r+t.height):(i=(r=(t.height+n.windowProps.windowHeight)/Math.abs(e.speed))+t.height,0<e.speed?(o=-r,t.height+n.windowProps.windowHeight/Math.abs(e.speed)):r+t.height);Math.abs(o)>=Math.abs(i)&&(i=Math.abs(o)+1),e.el.style.setProperty("padding-bottom",i+"px",null),e.el.style.setProperty("margin-top",o+"px",null)},u=function(t,e){return t===a.MEDIA_TYPES.VIDEO||-1!==a.VIDEO_EXTENSIONS.indexOf(function(t){var e=t.substr(t.lastIndexOf(".")+1,t.length).toLowerCase();if(-1===e)throw console.error("Invalid extension for media with media path: "+t),new Error("Invalid extension for media");return e}(e))},d=function(){window.pv.windowProps={scrollTop:window.scrollY||document.documentElement.scrollTop,windowHeight:window.innerHeight,windowMidHeight:window.innerHeight/2}}},"./src/ts/initContainer.ts":function(t,e,n){n.r(e),n.d(e,"setContainerHeight",function(){return r});var o=n("./src/ts/constants.ts"),r=function(t,e){var n,t=t.el.getAttribute(o.ELEMENT_DATA_KEYS.HEIGHT);if(!t)return e.container.height;if(!isNaN(Number(t)))return t+"px";if("px"===(n=t.substr(t.length-2,t.length))||"vh"===n)return t;throw new Error('Invalid height suffix, expected "px" or "vh" but got: '+n)}},"./src/ts/parallax-vanilla.ts":function(t,e,n){n.r(e),n("./src/less/parallax-vanilla.less");var o,r=n("./src/ts/init.ts"),i=n("./src/ts/translate.ts"),s=n("./src/ts/resize.ts");void 0===(o=window).pv?(o.pv=function(){var t={init:r.default};o.pv=t,void 0===o.orientation&&(o.onresize=function(){return Object(s.default)()}),o.raf=o.requestAnimationFrame||o.webkitRequestAnimationFrame||o.mozRequestAnimationFrame||function(t){o.setTimeout(t,1e3/60)};function e(){Object(i.default)(),o.raf(e)}return o.raf(e),t}(),console.log("%c parallax-vanilla defined.","color: green")):console.log("%c parallax-vanilla already defined.","color: red")},"./src/ts/resize.ts":function(t,e,n){n.r(e);var o=n("./src/ts/constants.ts"),r=n("./src/ts/initBlock.ts");e.default=function(){window.pv.containerArr.forEach(function(e){e.height=e.el.clientHeight,e.blocks.forEach(function(t){t.mediatype!==o.MEDIA_TYPES.NONE&&Object(r.setBlockAttributes)(e,t)})})}},"./src/ts/translate.ts":function(t,e,n){n.r(e),e.default=function(){var r=window.pv;r.windowProps.scrollTop=window.scrollY||document.documentElement.scrollTop,r.windowProps.scrollTop!==r.prevScrollTop&&(r.prevScrollTop=r.windowProps.scrollTop,r.containerArr.forEach(function(t,e){var n,o;s(t.offset,t.height)?(e>r.mostReContainerInViewport&&(r.mostReContainerInViewport=e),n=t.offset<r.windowProps.windowHeight?r.windowProps.scrollTop:r.windowProps.windowHeight-t.offset+r.windowProps.scrollTop,t.blocks.forEach(function(t){t.videoEl&&(t.videoEl.play(),t===r.unmutedBlock&&(t.muted||(t.videoEl.muted=t.muted,t.muted?r.unmutedBlock.audioButton.classList.add("mute"):r.unmutedBlock.audioButton.classList.remove("mute")))),i(t.el,"translate3d(0,"+Math.round(n/t.speed)+"px, 0)")})):(t.hasVideoBlock&&t.blocks.forEach(function(t){t.videoEl&&(t.videoEl.pause(),r.unmutedBlock===t&&(t.videoEl.muted=!0))}),(o=r.containerArr[e+1])&&!s(o.offset,o.height)&&r.mostReContainerInViewport<e&&!a(t,o)||o&&s(o.offset,o.height)&&(r.mostReContainerInViewport=e+1))}))};var i=function(t,e){t.style.webkitTransform=e,t.style.MozTransform=e,t.style.msTransform=e,t.style.OTransform=e,t.style.transform=e},s=function(t,e){var n=window.pv;return 0<n.windowProps.scrollTop+n.windowProps.windowHeight-t&&n.windowProps.scrollTop<t+e},a=function(t,e){return t.offset+t.height>e.offset+e.height}}});